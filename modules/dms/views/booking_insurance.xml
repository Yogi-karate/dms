<?xml version="1.0"?>
<odoo>
         <record id="booking_lost_view_form_new_insurance" model="ir.ui.view">
            <field name="name">crm.booking.lost.form.new.insurance</field>
            <field name="model">crm.lead.lost</field>
            <field name="arch" type="xml">
                <form string="Lost Reason">
                    <group class="oe_title">
                        <field name="dms_lost_reason_insurance"/>
                        <field name="lost_remarks"/>
                    </group>
                    <footer>
                        <button name="action_insurance_reason_apply_new" string="Submit" type="object" class="btn-primary"/>
                        <button string="Cancel" class="btn-secondary" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <record id="booking_lost_action_new_insurance" model="ir.actions.act_window">
            <field name="name">Lost Reasons Insurance...</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">crm.lead.lost</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="booking_lost_view_form_new_insurance"/>
            <field name="target">new</field>
            <field name="domain"></field>
        </record>
    <record id="form_view_insurance_booking" model="ir.ui.view">
        <field name="name">insurance.booking.form</field>
        <field name="model">insurance.booking</field>
         <field name="arch" type="xml">

              <form string="Insurance Bookings">
                      <header>
                          <field name="active" invisible="1"/>
                          <button name="%(booking_lost_action_new_insurance)d" string="Mark as Lost"
                                  type="action" class="oe_highlight" attrs="{'invisible': [('active', '=', False)]}"/>
                          <button name="restore_booking_lost_action_new" string="Restore" type="object"
                                  class="oe_highlight" attrs="{'invisible': [('active', '=', True)]}"/>
                      </header>

                        <sheet>
                            <div class="badge-pill badge-danger float-right"
                         attrs="{'invisible': [('active', '=', True)]}">Lost
                    </div>
                            <group>
                                <group class="left">
                                <field name="partner_name"/>
                          <field name="vehicle_id"/>
                          <field name="engine_no"/>
                          <field name="reg_no"/>
                               <field name="idv"/>
                               <field name="prev_ncb"/>
                               <field name="previous_insurance_company" />
                               <field name="discount"/>
                            <field name="prev_dip_or_comp"/>
                            <field name="prev_due_date"/>
                               <field name="prev_final_premium"/>
                            <field name="policy_no"/>

                           </group>
                           <group class="right">
                               <field name="mobile"/>
                               <field name="chassis_no"/>
                               <field name="sale_date"/>
                               <field name="mail"/>
                               <field name="previous_idv"/>
                               <field name="cur_ncb"/>
                               <field name="rollover_company" string="Current Insurance Company"/>
                               <field name="alternate_no"/>
                               <field name="cur_dip_or_comp"/>
                               <field name="cur_due_date"/>
                               <field name="cur_final_premium"/>
                               <field name="booking_type"/>
                                <field name="dop" attrs="{'invisible': [('booking_type', '!=', 'pickup')]}"/>
                            <field name="pick_up_address" string="Pickup Address" attrs="{'invisible': [('booking_type', '!=', 'pickup')]}"/>

                           </group>
                            </group>



                        </sheet>

            </form>
         </field>
    </record>

      <record id="tree_view_insurance_booking" model="ir.ui.view">
        <field name="name">insurance.booking.tree</field>
        <field name="model">insurance.booking</field>
        <field name="arch" type="xml">
            <tree string="Insurance Bookings">
                <field name="active" invisible="1"/>
                <field name="partner_name"/>
                <field name="mobile"/>
                <field name="mail"/>
                <field name="vehicle_model"/>
                <field name="vehicle_id"/>
                <field name="user_id" string="TC Name"/>
                <field name="engine_no"/>
                <field name="chassis_no"/>
            </tree>
        </field>
    </record>

    <record id="view_dms_booking_insurance_filter" model="ir.ui.view">
        <field name="name">insurance.booking.search</field>
        <field name="model">insurance.booking</field>
        <field name="arch" type="xml">
            <search string="Search Activities">
                <field name="mobile"/>
                <separator/>
            </search>
        </field>
    </record>


      <record id="action_insurance_booking" model="ir.actions.act_window">
        <field name="name">Insurance Policy bookings</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">insurance.booking</field>
        <field name="view_ids"
               eval="[(5, 0, 0),
                           (0, 0, {'view_mode': 'tree', 'view_id': ref('tree_view_insurance_booking')}),
                           (0, 0, {'view_mode': 'form', 'view_id': ref('form_view_insurance_booking')})
                           ]"/>
        <field name="context"></field>
        <field name="domain"></field>
          <field name="search_view_id" ref="view_dms_booking_insurance_filter"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Add an Insurance Policy
            </p>
            <p>
                create an Insurance Policy
            </p>
        </field>
    </record>


    <record id="action_res_partner_insurance_company" model="ir.actions.act_window">
            <field name="name">Insurance Companies</field>
            <field name="res_model">res.partner.bank</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Create an Insurance Company
              </p>
            </field>
        </record>
    <menuitem action="action_res_partner_insurance_company" id="create_an_insurance_menu"
              parent="menu_dms_insurance_root"
              sequence="1" groups = "group_dms_callcenter_lead_insurance"/>
</odoo>